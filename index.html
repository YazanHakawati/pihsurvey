<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>حاسبة سعر المنزل الذكي</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"> <link rel="stylesheet" href="pihsurvey1.css">
</head>
<body>
    <div class="container">
        <header>
            <img src="P I H.gif" alt="PIH Animated GIF" class="header-main-gif">
            <div class="logo">
                <img src="PIH_Cover.png" alt="PIH Logo" class="header-cover-image">
            </div>
        </header>
        <h2>حاسبة سعر المنزل الذكي</h2>

        <label>عدد الطوابق: <input type="number" id="num_floors" min="1" value="1"></label>
        <label>مساحة الطابق الواحد (م²): <input type="number" id="floor_area" min="50" value="120"></label>
        <label>عدد غرف النوم: <input type="number" id="num_bedrooms" min="0" value="2"></label>
        <label>عدد الحمامات: <input type="number" id="num_bathrooms" min="0" value="1"></label>
        <label>عدد الصالونات: <input type="number" id="num_salons" min="0" value="1"></label>
        <label>عدد المطابخ: <input type="number" id="num_kitchens" min="0" value="1"></label>
        <label>عدد الأبجورات الذكية (لكامل المنزل): <input type="number" id="num_total_shutters" min="0" value="4"></label>
        <hr style="margin: 20px 0;">

        <h4>خيارات الأنظمة الإضافية:</h4>
        <label>حساسات الحركة (إضافية للصالونات): <select id="additional_motion_sensors"><option value="1">نعم</option><option value="0" selected>لا</option></select></label>
        <label>حساسات الغاز (للمطابخ): <select id="gas_sensors"><option value="1">نعم</option><option value="0" selected>لا</option></select></label>
        <label>كبسة بويلر (لكل طابق): <select id="boiler_button_option"><option value="1">نعم</option><option value="0" selected>لا</option></select></label>
        <label>حساسات أبواب/نوافذ إضافية: <select id="door_sensors_option"><option value="1">نعم (1 لكل طابق)</option><option value="0" selected>لا</option></select></label>
        <label>حساسات تواجد إضافية (للصالات الكبيرة مثلاً): <select id="presence_sensors_option"><option value="1">نعم (1 لكل صالون)</option><option value="0" selected>لا</option></select></label>
        <label>نظام تحكم بالمكيفات (1 لكل غرفة نوم وصالون): <select id="ac_control_option"><option value="1">نعم</option><option value="0" selected>لا</option></select></label>
        <hr style="margin: 20px 0;">

        <h4>الأنظمة الرئيسية والتحكم:</h4>
        <label>شاشة تحكم لمس مركزية: <select id="touch_screen_option"><option value="1">نعم</option><option value="0" selected>لا</option></select></label>
        <label>المساعد الصوتي (أليكسا): <select id="voice_assistant"><option value="1">نعم</option><option value="0" selected>لا</option></select></label>
        <label>نظام الدخول الذكي: <select id="smart_entry"><option value="1">نعم</option><option value="0" selected>لا</option></select></label>
        <label>نظام بريميوم PIH (يشمل جوانب متقدمة إضافية): <select id="premium_system"><option value="1">نعم</option><option value="0" selected>لا</option></select></label>
        <hr style="margin: 20px 0;">
        
        <button onclick="calculatePrice()">حساب السعر</button>
        
        <h3>السعر الإجمالي المقدر: <span id="estimated_price">-</span> شيكل</h3>
        
        <div id="invoice" style="display:none;">
            <h4>تفاصيل التكلفة المقدرة:</h4>
            <p>تكلفة مفاتيح الإضاءة: <span id="lighting_switches_cost">0</span> شيكل</p>
            <p>تكلفة مفاتيح الأبجورات: <span id="shutter_switches_cost">0</span> شيكل</p>
            <p>تكلفة حساسات الحركة: <span id="motion_sensors_cost">0</span> شيكل</p>
            <p>تكلفة حساسات الغاز: <span id="gas_sensors_inv_cost">0</span> شيكل</p>
            <p>تكلفة كبسات البويلر: <span id="boiler_buttons_inv_cost">0</span> شيكل</p>
            <p>تكلفة حساسات الأبواب/النوافذ: <span id="door_sensors_inv_cost">0</span> شيكل</p>
            <p>تكلفة حساسات التواجد: <span id="presence_sensors_inv_cost">0</span> شيكل</p>
            <p>تكلفة حساسات التحكم بالمكيف: <span id="ac_control_inv_cost">0</span> شيكل</p>
            <p>تكلفة أجهزة الراوتر (Zigbee): <span id="zigbee_routers_cost">0</span> شيكل</p>
            <p>تكلفة شاشة التحكم المركزية: <span id="touch_screen_inv_cost">0</span> شيكل</p>
            <p>تكلفة المساعد الصوتي (أليكسا): <span id="voice_assistant_inv_cost">0</span> شيكل</p>
            <hr style="margin: 10px 0;">
            <p><strong>المجموع الفرعي للقطع:</strong> <span id="items_subtotal_cost">0</span> شيكل</p>
            <hr style="margin: 10px 0;">
            <p>تكلفة نظام الدخول الذكي: <span id="smart_entry_inv_cost">0</span> شيكل</p>
            <p>تكلفة نظام بريميوم PIH الإضافي: <span id="premium_system_inv_cost">0</span> شيكل</p>
            <hr style="margin: 10px 0;">
            <p>عدد أيام العمل المتوقع: <span id="estimated_work_days_inv">0</span> يوم</p>
            <p>تكلفة التركيب: <span id="installation_inv_cost">0</span> شيكل</p>
            <p>تكلفة برمجة تطبيق الهاتف: <span id="mobile_programming_inv_cost">0</span> شيكل</p>
            <p>تكلفة برمجة النظام الصوتي: <span id="voice_programming_inv_cost">0</span> شيكل</p>
            <hr style="margin: 10px 0;">
            <p><strong>السعر الإجمالي المقدر:</strong> <span id="total_invoice_price">0</span> شيكل</p>
        </div>

        <div id="disclaimer">
            <p>
                هذه القيمة تقديرية بشكل سطحي. لمعرفة تكلفة منزلك الحقيقية، يجب على مهندسي الموقع أن يعاينوا المنزل على أرض الواقع. الأسعار قابلة للتغيير بناءً على توفر القطع وأسعار السوق.
                <br>للتواصل والاستشارة الدقيقة:
                <a href="https://wa.me/972566334569" target="_blank">واتساب: +972 56-633-4569</a>
            </p>
        </div>
    </div>

    <footer>
        <div class="container">
            <div class="social-links">
                <a href="https://www.instagram.com/pih_smart/" target="_blank" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                <a href="https://www.facebook.com/profile.php?id=61572959214078" target="_blank" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                <a href="https://www.linkedin.com/company/palestine-intelligent-homes" target="_blank" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                <a href="https://wa.me/972566334569" target="_blank" aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a>
                <a href="mailto:info@palestineintelligent.homes" aria-label="Email"><i class="fas fa-envelope"></i></a>
            </div>
            <p>© <script>document.write(new Date().getFullYear())</script> كل الحقوق محفوظة - Palestine Intelligent Homes | تم التطوير بواسطة <a href="https://www.palestineintelligent.homes/" target="_blank" class="footer-link">PIH</a></p>
        </div>
    </footer>

    <script>
        const ITEM_PRICES = {
            presence_sensor_zigbee: 80,
            boiler_switch: 80,
            motion_sensor_zigbee: 60,
            shutter_switch_double_zigbee: 80,
            shutter_switch_single_zigbee: 75,
            triple_switch_zigbee: 90,
            quad_switch_zigbee: 95,
            double_switch_zigbee: 85,
            zigbee_router: 90,
            gas_sensor_zigbee: 100,
            door_sensor_zigbee: 40,
            single_switch_zigbee: 82,
            ac_control_zigbee: 60,
            alexa_pop: 450,
            touch_screen: 1400
        };

        function setInitialInputColors() {
            const inputs = document.querySelectorAll('input[type="number"], select');
            inputs.forEach(input => {
                input.classList.add('placeholder-active'); // Apply gray color initially

                input.addEventListener('focus', function() {
                    this.classList.remove('placeholder-active');
                    this.style.color = 'var(--black)'; // Ensure color is black on focus
                });
                input.addEventListener('change', function() { // For selects and after number input blur
                    this.classList.remove('placeholder-active');
                    this.style.color = 'var(--black)';
                    if (this.value === "" && this.type === 'number' && this.defaultValue) {
                        // Potentially re-add placeholder if empty, but user might want it black
                    }
                });
                 input.addEventListener('input', function() { // For numbers as user types
                    this.classList.remove('placeholder-active');
                    this.style.color = 'var(--black)';
                });

                // Ensure initial non-focused state is gray if it has default value
                if (document.activeElement !== input) {
                     // Check if current value is the default from HTML attribute
                    if (input.tagName === 'INPUT' && input.value === input.getAttribute('value')) {
                         input.style.color = '#aaa';
                    } else if (input.tagName === 'SELECT') {
                        // For selects, if the selected option is the one initially marked 'selected'
                        // This is harder to track without knowing which option was initially selected via HTML
                        // The classList.add('placeholder-active') should handle the initial state via CSS
                    }
                } else {
                     input.style.color = 'var(--black)'; // If somehow focused on load
                }

            });
        }
        // Simplified placeholder styling logic
        function initializeInputFields() {
            const inputs = document.querySelectorAll('input[type="number"], select');
            inputs.forEach(input => {
                // Set initial color to gray
                input.style.color = '#aaa';
                input.setAttribute('data-hadfocus', 'false');


                input.addEventListener('focus', function() {
                    this.style.color = 'var(--black)'; // Change to black on focus
                    this.setAttribute('data-hadfocus', 'true');
                });

                input.addEventListener('change', function() {
                    this.style.color = 'var(--black)'; // Ensure it's black after change
                    this.setAttribute('data-hadfocus', 'true');
                });
                
                input.addEventListener('input', function() { // For numbers as user types
                    this.style.color = 'var(--black)';
                    this.setAttribute('data-hadfocus', 'true');
                });

                // Optional: If you want to revert to gray if the field is blurred and unchanged from its initial default
                // This is more complex and might not be desired if the user explicitly sets the default value.
                // For now, once focused/changed, it stays black.
            });
        }
        
        document.addEventListener('DOMContentLoaded', initializeInputFields);


        function calculatePrice() {
            // --- استخلاص المدخلات ---
            let numFloors = Math.max(1, parseInt(document.getElementById('num_floors').value) || 1);
            let floorArea = Math.max(50, parseInt(document.getElementById('floor_area').value) || 50);
            let numBedrooms = Math.max(0, parseInt(document.getElementById('num_bedrooms').value) || 0);
            let numBathrooms = Math.max(0, parseInt(document.getElementById('num_bathrooms').value) || 0);
            let numSalons = Math.max(0, parseInt(document.getElementById('num_salons').value) || 0);
            let numKitchens = Math.max(0, parseInt(document.getElementById('num_kitchens').value) || 0);
            let numTotalShutters = Math.max(0, parseInt(document.getElementById('num_total_shutters').value) || 0);
            
            let wantsAdditionalMotionSensors = parseInt(document.getElementById('additional_motion_sensors').value) === 1;
            let wantsGasSensors = parseInt(document.getElementById('gas_sensors').value) === 1;
            let wantsBoilerButton = parseInt(document.getElementById('boiler_button_option').value) === 1;
            let wantsDoorSensors = parseInt(document.getElementById('door_sensors_option').value) === 1;
            let wantsPresenceSensors = parseInt(document.getElementById('presence_sensors_option').value) === 1;
            let wantsAcControl = parseInt(document.getElementById('ac_control_option').value) === 1;

            let wantsTouchScreen = parseInt(document.getElementById('touch_screen_option').value) === 1;
            let wantsVoiceAssistant = parseInt(document.getElementById('voice_assistant').value) === 1;
            let wantsSmartEntry = parseInt(document.getElementById('smart_entry').value) === 1;
            let wantsPremiumSystem = parseInt(document.getElementById('premium_system').value) === 1;

            let quantities = {
                quad_switch_zigbee: 0, triple_switch_zigbee: 0, shutter_switch_single_zigbee: 0,
                motion_sensor_zigbee: 0, boiler_switch: 0, gas_sensor_zigbee: 0,
                zigbee_router: 0, alexa_pop: 0, touch_screen: 0, door_sensor_zigbee: 0,
                presence_sensor_zigbee: 0, ac_control_zigbee: 0
            };

            let costs = {
                lighting_switches: 0, shutter_switches: 0, motion_sensors: 0, gas_sensors: 0,
                boiler_buttons: 0, door_sensors: 0, presence_sensors: 0, ac_control: 0,
                zigbee_routers: 0, touch_screen: 0, voice_assistant: 0, smart_entry: 0,
                premium_system: 0, installation: 0, mobile_programming: 0, voice_programming: 0
            };

            quantities.quad_switch_zigbee += numSalons * 3;
            quantities.triple_switch_zigbee += numBedrooms * 2;
            quantities.triple_switch_zigbee += numBathrooms * 1;
            quantities.shutter_switch_single_zigbee = numTotalShutters;
            quantities.motion_sensor_zigbee += numBathrooms * 1;
            if (wantsAdditionalMotionSensors) quantities.motion_sensor_zigbee += numSalons * 1;
            if (wantsBoilerButton) quantities.boiler_switch += numFloors * 1;
            if (wantsGasSensors) quantities.gas_sensor_zigbee += numKitchens * 1;
            if (wantsDoorSensors) quantities.door_sensor_zigbee += numFloors * 1;
            if (wantsPresenceSensors) quantities.presence_sensor_zigbee += numSalons * 1;
            if (wantsAcControl) quantities.ac_control_zigbee += numBedrooms + numSalons;
            if (wantsTouchScreen) quantities.touch_screen = 1;

            if (wantsVoiceAssistant) {
                let alexaUnits = 1;
                if (numFloors > 1) alexaUnits += (numFloors - 1);
                else if (floorArea * numFloors > 200 && numFloors === 1) alexaUnits = 2;
                quantities.alexa_pop = alexaUnits;
            }
            
            let totalZigbeeDevices = quantities.quad_switch_zigbee + quantities.triple_switch_zigbee +
                                     quantities.shutter_switch_single_zigbee + quantities.motion_sensor_zigbee +
                                     quantities.boiler_switch + quantities.gas_sensor_zigbee + 
                                     quantities.door_sensor_zigbee + quantities.presence_sensor_zigbee +
                                     quantities.ac_control_zigbee;
            if (totalZigbeeDevices > 0) quantities.zigbee_router = Math.max(1, numFloors);

            costs.lighting_switches = (quantities.quad_switch_zigbee * ITEM_PRICES.quad_switch_zigbee) +
                                      (quantities.triple_switch_zigbee * ITEM_PRICES.triple_switch_zigbee);
            costs.shutter_switches = quantities.shutter_switch_single_zigbee * ITEM_PRICES.shutter_switch_single_zigbee;
            costs.motion_sensors = quantities.motion_sensor_zigbee * ITEM_PRICES.motion_sensor_zigbee;
            costs.gas_sensors = quantities.gas_sensor_zigbee * ITEM_PRICES.gas_sensor_zigbee;
            costs.boiler_buttons = quantities.boiler_switch * ITEM_PRICES.boiler_switch;
            costs.door_sensors = quantities.door_sensor_zigbee * ITEM_PRICES.door_sensor_zigbee;
            costs.presence_sensors = quantities.presence_sensor_zigbee * ITEM_PRICES.presence_sensor_zigbee;
            costs.ac_control = quantities.ac_control_zigbee * ITEM_PRICES.ac_control_zigbee;
            costs.zigbee_routers = quantities.zigbee_router * ITEM_PRICES.zigbee_router;
            costs.touch_screen = quantities.touch_screen * ITEM_PRICES.touch_screen;
            costs.voice_assistant = quantities.alexa_pop * ITEM_PRICES.alexa_pop;

            if (wantsSmartEntry) costs.smart_entry = 962; 
            if (wantsPremiumSystem) costs.premium_system = 3000; 

            let itemsSubtotal = costs.lighting_switches + costs.shutter_switches + costs.motion_sensors +
                                costs.gas_sensors + costs.boiler_buttons + costs.door_sensors +
                                costs.presence_sensors + costs.ac_control + costs.zigbee_routers +
                                costs.touch_screen + costs.voice_assistant;

            let totalArea = floorArea * numFloors;
            let estimatedWorkDays = 0;
            if (totalArea <= 170) {
                estimatedWorkDays = 3;
            } else if (totalArea > 170 && totalArea <= 180) {
                estimatedWorkDays = 4;
            } else { 
                estimatedWorkDays = 6;
            }

            costs.installation = estimatedWorkDays * 300;
            costs.mobile_programming = (estimatedWorkDays / 2) * 350;
            costs.voice_programming = wantsVoiceAssistant ? costs.mobile_programming : 0;
            
            let totalPrice = itemsSubtotal + costs.smart_entry + costs.premium_system + 
                             costs.installation + costs.mobile_programming + costs.voice_programming;

            document.getElementById('estimated_price').innerText = totalPrice.toFixed(0);
            document.getElementById('invoice').style.display = 'block';
            document.getElementById('lighting_switches_cost').innerText = costs.lighting_switches.toFixed(0);
            document.getElementById('shutter_switches_cost').innerText = costs.shutter_switches.toFixed(0);
            document.getElementById('motion_sensors_cost').innerText = costs.motion_sensors.toFixed(0);
            document.getElementById('gas_sensors_inv_cost').innerText = costs.gas_sensors.toFixed(0);
            document.getElementById('boiler_buttons_inv_cost').innerText = costs.boiler_buttons.toFixed(0);
            document.getElementById('door_sensors_inv_cost').innerText = costs.door_sensors.toFixed(0);
            document.getElementById('presence_sensors_inv_cost').innerText = costs.presence_sensors.toFixed(0);
            document.getElementById('ac_control_inv_cost').innerText = costs.ac_control.toFixed(0);
            document.getElementById('zigbee_routers_cost').innerText = costs.zigbee_routers.toFixed(0);
            document.getElementById('touch_screen_inv_cost').innerText = costs.touch_screen.toFixed(0);
            document.getElementById('voice_assistant_inv_cost').innerText = costs.voice_assistant.toFixed(0);
            document.getElementById('items_subtotal_cost').innerText = itemsSubtotal.toFixed(0);
            document.getElementById('smart_entry_inv_cost').innerText = costs.smart_entry.toFixed(0);
            document.getElementById('premium_system_inv_cost').innerText = costs.premium_system.toFixed(0);
            document.getElementById('estimated_work_days_inv').innerText = estimatedWorkDays;
            document.getElementById('installation_inv_cost').innerText = costs.installation.toFixed(0);
            document.getElementById('mobile_programming_inv_cost').innerText = costs.mobile_programming.toFixed(0);
            document.getElementById('voice_programming_inv_cost').innerText = costs.voice_programming.toFixed(0);
            document.getElementById('total_invoice_price').innerText = totalPrice.toFixed(0);
        }
    </script>
</body>
</html>
